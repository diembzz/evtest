import{E as v,a as b,b as y,c as q}from"./BXrzqCWq.js";import{v as w,c as z}from"./B6GzzAEY.js";import{d as m,v as d,Y as E,E as C,P as r,z as t,S as k,W as $,A as a,i as S,t as s,x as B,L as u}from"./D825Yx2c.js";import{s as P,t as A}from"./DafI-t-O.js";import"./CVOUIdTD.js";import"./l0sNRNKZ.js";import"./BtMFUubj.js";import{A as N}from"./DAEPLsST.js";import"./C910a0G-.js";const V=["src"],D={key:0,class:"events-search-pagination"},L=m({data:()=>({loading:!0,items:[],pagination:{page:0,pages:0,total:0,size:0}}),watch:{"$route.query":{async handler(){this.loading=!0;const e=await new N("events").index({page:(this._.provides[r]||this.$route).query.page,sort:(this._.provides[r]||this.$route).query.sort});this.items=e,this.pagination=e.meta().pagination,this.loading=!1},deep:!0,immediate:!0}}}),J=m({...L,__name:"index",setup(g){return(e,i)=>{const n=y,l=z,p=S("router-link"),c=q,_=v,h=b,f=w;return s(),d($,null,[E((s(),C(_,{data:e.items,border:!e.loading,"empty-text":e.loading?"Loading...":"Data records not found.","default-sort":{prop:String((e._.provides[r]||e.$route).query.sort??"").replace(/^-/,""),order:String((e._.provides[r]||e.$route).query.sort??"").startsWith("-")?"descending":"ascending"},onSortChange:i[0]||(i[0]=o=>e.$router.replace({query:{...(e._.provides[r]||e.$route).query,sort:o.order?(o.order=="descending"?"-":"")+o.prop:""}}))},{default:a(()=>[t(n,{prop:"poster",label:"Poster",width:"105"},{default:a(({row:o})=>[B("img",{width:"80",height:"80",alt:"Poster",src:o.poster.src},null,8,V)]),_:1}),t(n,{prop:"name",label:"Name",sortable:"custom"}),t(n,{prop:"venue.name",label:"Venue",sortable:"custom",width:"200"}),t(n,{prop:"event_date",label:"Event Date",sortable:"custom",width:"120"}),t(n,{prop:"event_date",label:"Actions",width:"81"},{default:a(({row:o})=>[t(c,{direction:"horizontal",size:7},{default:a(()=>[t(p,{to:"/events/"+o.id},{default:a(()=>[t(l,{type:"primary",icon:u(P),size:"small",circle:""},null,8,["icon"])]),_:2},1032,["to"]),t(p,{to:"/events/"+o.id+"/delete"},{default:a(()=>[t(l,{type:"danger",icon:u(A),size:"small",circle:""},null,8,["icon"])]),_:2},1032,["to"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","empty-text","default-sort"])),[[f,e.loading]]),e.loading?k("",!0):(s(),d("div",D,[t(h,{background:"",layout:"prev, pager, next",onCurrentChange:i[1]||(i[1]=o=>e.$router.replace({query:{...(e._.provides[r]||e.$route).query,page:o}})),"current-page":e.pagination.page,"page-size":e.pagination.size,total:e.pagination.total},null,8,["current-page","page-size","total"])]))],64)}}});export{J as default};
