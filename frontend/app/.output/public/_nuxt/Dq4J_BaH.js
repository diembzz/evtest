import{v,c as y}from"./C-jyEtyI.js";import{E as b,a as q,b as w,c as z}from"./CHyC6uXQ.js";import{d as m,v as d,z as t,A as o,Y as C,E,P as r,S as k,W as $,i as B,t as p,B as S,x as N,L as u}from"./BsQ1qeEF.js";import{s as P,t as V}from"./BCnD8WR-.js";import"./CnLygznj.js";import"./l0sNRNKZ.js";import"./DcAYSCT0.js";import{A}from"./Cy43Ywnd.js";import"./tZ1a-uO1.js";const D=["src"],L={key:0,class:"events-search-pagination"},T=m({data:()=>({loading:!0,items:[],pagination:{page:0,pages:0,total:0,size:0}}),watch:{"$route.query":{async handler(){this.loading=!0;const e=await new A("events").index({page:(this._.provides[r]||this.$route).query.page,sort:(this._.provides[r]||this.$route).query.sort});this.items=e,this.pagination=e.meta().pagination,this.loading=!1},deep:!0,immediate:!0}}}),K=m({...T,__name:"index",setup(c){return(e,s)=>{const i=y,l=B("router-link"),n=w,g=z,_=b,f=q,h=v;return p(),d($,null,[t(l,{to:"/events/create"},{default:o(()=>[t(i,{type:"primary",class:"ui-datalist-create-btn"},{default:o(()=>[S("Create ")]),_:1})]),_:1}),C((p(),E(_,{data:e.items,border:!e.loading,"empty-text":e.loading?"Loading...":"Data records not found.","default-sort":{prop:String((e._.provides[r]||e.$route).query.sort??"").replace(/^-/,""),order:String((e._.provides[r]||e.$route).query.sort??"").startsWith("-")?"descending":"ascending"},onSortChange:s[0]||(s[0]=a=>e.$router.replace({query:{...(e._.provides[r]||e.$route).query,sort:a.order?(a.order=="descending"?"-":"")+a.prop:""}}))},{default:o(()=>[t(n,{prop:"poster",label:"Poster",width:"105"},{default:o(({row:a})=>[N("img",{width:"80",height:"80",alt:"Poster",src:a.poster.src},null,8,D)]),_:1}),t(n,{prop:"name",label:"Name",sortable:"custom"}),t(n,{prop:"venue.name",label:"Venue",sortable:"custom",width:"200"}),t(n,{prop:"event_date",label:"Event Date",sortable:"custom",width:"120"}),t(n,{prop:"event_date",label:"Actions",width:"81"},{default:o(({row:a})=>[t(g,{direction:"horizontal",size:7},{default:o(()=>[t(l,{to:"/events/"+a.id},{default:o(()=>[t(i,{type:"primary",icon:u(P),size:"small",circle:""},null,8,["icon"])]),_:2},1032,["to"]),t(l,{to:"/events/"+a.id+"/delete"},{default:o(()=>[t(i,{type:"danger",icon:u(V),size:"small",circle:""},null,8,["icon"])]),_:2},1032,["to"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","empty-text","default-sort"])),[[h,e.loading]]),e.loading?k("",!0):(p(),d("div",L,[t(f,{background:"",layout:"prev, pager, next",onCurrentChange:s[1]||(s[1]=a=>e.$router.replace({query:{...(e._.provides[r]||e.$route).query,page:a}})),"current-page":e.pagination.page,"page-size":e.pagination.size,total:e.pagination.total},null,8,["current-page","page-size","total"])]))],64)}}});export{K as default};
