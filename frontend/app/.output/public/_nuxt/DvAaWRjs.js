import{v as _,E as h,c as g}from"./B6GzzAEY.js";import{U as E,E as b,a as y,b as F}from"./Ciq7Lbpv.js";import"./DafI-t-O.js";import{E as l}from"./CHipouqI.js";import{d as $}from"./CNthcCdv.js";import{m as w,_ as N,Y as k,E as V,A as r,t as d,v as B,z as t,B as m,S as C}from"./D825Yx2c.js";import{A as u}from"./DAEPLsST.js";import"./C910a0G-.js";import"./kP4nQUyw.js";const q=$({components:{UiImageUploadField:E},data(){return{ready:!1,loading:!0,fields:{poster:{src:""}},errors:{},rules:{name:[{required:!0,message:"Please input name"}]}}},props:{id:Number},async mounted(){this.fields=this.id?await new u("venues").show(this.id):this.fields,this.loading=!1,this.ready=!0},computed:{request(){return{id:this.fields.id,name:this.fields.name}}},methods:{async submitForm(){await this.$refs.form.validate(async e=>{if(e){this.errors={},this.loading=!0;const o=await new u("venues").save(this.request);o.success()?(l.success({title:"Success",message:"Record is successfully saved.",offset:10}),this.id||w("/venues/"+o.id)):(this.errors=o.errors(),o.status()!=422&&l.error({title:"Failed",message:o.error()??"API request error.",offset:10})),this.loading=!1}})},resetForm(){this.$refs.form.resetFields()}}},"$x3OEOZc6iE"),A={key:0};function I(e,s,o,U,S,D){const f=h,a=y,p=F,n=g,c=b,v=_;return k((d(),V(c,{ref:"form",model:e.fields,rules:e.rules,"status-icon":""},{default:r(()=>[e.ready?(d(),B("div",A,[t(a,{prop:"name",error:e.errors.name,label:"Name"},{default:r(()=>[t(f,{modelValue:e.fields.name,"onUpdate:modelValue":s[0]||(s[0]=i=>e.fields.name=i)},null,8,["modelValue"])]),_:1},8,["error"]),t(p),t(a,{class:"app-form-footer"},{default:r(()=>[t(n,{type:"primary",onClick:s[1]||(s[1]=i=>e.submitForm()),disabled:e.loading},{default:r(()=>[m("Save")]),_:1},8,["disabled"]),t(n,{onClick:s[2]||(s[2]=i=>e.resetForm()),disabled:e.loading},{default:r(()=>[m("Reset")]),_:1},8,["disabled"])]),_:1})])):C("",!0)]),_:1},8,["model","rules"])),[[v,e.loading]])}const G=N(q,[["render",I]]);export{G as default};
